<!DOCTYPE html>

<html lang="en">
  <head>
    <link href='https://fonts.googleapis.com/css?family=Raleway:300,400,600' rel='stylesheet' type='text/css'>
    <link href="../css/normalize.css" rel="stylesheet">
    <link href="../css/skeleton.css" rel="stylesheet">
    <link href="../css/customize.css" rel="stylesheet">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script>
      var parameters = new URLSearchParams(window.location.search);

      var messagingKey = parameters.get('messaging-key');
      var messagingToken = parameters.get('messaging-token');

      function sendNotification() {
        fetch('https://fcm.googleapis.com/fcm/send', {
          body: JSON.stringify({
            'data': {
              'click_action': 'FLUTTER_NOTIFICATION_CLICK',
            },
            'notification': {
              'body_loc_key' : 'notification_body_login',
              'title_loc_args' : ['abaintern.abacus.ch'],
              'title_loc_key' : 'notification_title_login',
            },
            'priority': 'high',
            'to': messagingToken
          }),
          headers: {
            'Authorization': 'key=' + messagingKey,
            'Content-Type': 'application/json'
          },
          method: 'POST'
        });
      }
    </script>
    <title>Playground | Abacus Access</title>
  </head>
  <body>
    <div class="decoration">
    </div>
    <div class="container">
      <div class="row">
        <h1>Playground | <b>Abacus Access</b></h1>
      </div>
      <div class="row">
        <h2>Onboarding</h2>
      </div>
      <div class="row">
        <a href="https://access.abacus.ch/app/v1/operations/tag:abacus.ch,2019:erp/qr-code-onboarding?code=8e1743&state=25a121&target-url=https://abaintern.abacus.ch">Onboarding via deep link</a>
      </div>
      <div class="row">
        <a href="https://f317a5.page.link/18ce2c">Onboarding via dynamic link</a>
      </div>
      <div class="row">
        <h2>Approval</h2>
      </div>
      <div class="row" id="sendNotification">
        <a href="javascript:sendNotification();">Approve a login</a>
      </div>
      <script>
        if (messagingKey == null || messagingToken == null) {
          document.getElementById('sendNotification').classList.add('broken');
        }
      </script>
    </div>
  </body>
</html>
